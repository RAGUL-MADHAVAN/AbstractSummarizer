{% extends "base.html" %} {% block title %}Single Abstract Summarizer - GenAI
Academic Summarizer{% endblock %} {% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-white py-3">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
              <li class="breadcrumb-item">
                <a href="{{ url_for('main.dashboard') }}">Dashboard</a>
              </li>
              <li class="breadcrumb-item active" aria-current="page">
                Single Abstract
              </li>
            </ol>
          </nav>
        </div>
        <div class="card-body">
          <h2 class="h4 mb-4">Single Abstract Summarizer</h2>
          <p class="text-muted mb-4">
            Paste an academic abstract in the text area below and click
            "Summarize" to generate a concise summary. The AI will extract the
            key points while preserving the core ideas of your text.
          </p>
          <form method="POST" id="summarizeForm">
            {{ form.hidden_tag() }}

            <div class="mb-4">
              {{ form.text.label(class="form-label fw-medium") }} {{
              form.text(class="form-control" + (" is-invalid" if
              form.text.errors else ""), rows="10", placeholder="Paste your
              academic abstract here...")|safe }} {% if form.text.errors %}
              <div class="invalid-feedback">
                {% for error in form.text.errors %} {{ error }} {% endfor %}
              </div>
              {% endif %}
              <div class="form-text">
                Minimum 100 characters. Current count:
                <span id="charCount">0</span> characters.
              </div>
            </div>

            <div class="d-flex justify-content-between align-items-center">
              <button
                type="button"
                class="btn btn-outline-secondary"
                onclick="clearForm()"
              >
                <i class="fas fa-eraser me-1"></i> Clear
              </button>
              <div>
                <button
                  type="button"
                  class="btn btn-outline-primary me-2"
                  data-bs-toggle="modal"
                  data-bs-target="#exampleModal"
                >
                  <i class="fas fa-question-circle me-1"></i> Example
                </button>
                <button type="submit" class="btn btn-primary" id="summarizeBtn">
                  <i class="fas fa-magic me-1"></i> Summarize
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Result Section (initially hidden) -->
      <div id="resultSection" class="d-none">
        <div class="card shadow-sm mb-4">
          <div class="card-header bg-white py-3"></div>
          <div class="card-body">
            <div class="mb-4">
              <h3 class="h6 text-muted mb-2">Original Text</h3>
              <div
                class="p-3 bg-light rounded"
                id="originalTextContainer"
              ></div>
            </div>
            <div class="mb-4">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h3 class="h6 text-muted mb-0">Generated Summary</h3>
                <div>
                  <button
                    type="button"
                    class="btn btn-sm btn-outline-secondary me-1"
                    onclick="copyToClipboard(event, 'summaryText')"
                  >
                    <i class="far fa-copy me-1"></i> Copy
                  </button>
                  <button
                    type="button"
                    class="btn btn-sm btn-outline-primary"
                    onclick="regenerateSummary()"
                  >
                    <i class="fas fa-sync-alt me-1"></i> Regenerate
                  </button>
                </div>
              </div>
              <div class="p-3 bg-light rounded" id="summaryText"></div>
              <div class="mt-2 text-end">
                <span class="text-muted small" id="summaryLength"></span>
              </div>
            </div>

            <div class="d-flex justify-content-between">
              <button
                type="button"
                class="btn btn-outline-secondary"
                onclick="startNewSummary()"
              >
                <i class="fas fa-plus me-1"></i> New Summary
              </button>
              <div>
                <a
                  href="#"
                  class="btn btn-outline-primary me-2"
                  id="saveSummaryBtn"
                >
                  <i class="far fa-save me-1"></i> Save
                </a>
                <a href="#" class="btn btn-primary" id="downloadSummaryBtn">
                  <i class="fas fa-download me-1"></i> Download
                </a>
              </div>
            </div>
          </div>
        </div>

        <div class="card shadow-sm">
          <div class="card-header bg-white py-3">
            <h2 class="h5 mb-0">Feedback</h2>
          </div>
          <div class="card-body">
            <p class="text-muted mb-3">
              How would you rate the quality of this summary?
            </p>
            <div
              class="d-flex justify-content-center mb-3"
              id="ratingContainer"
            >
              {% for i in range(1, 6) %}
              <i
                class="far fa-star fa-2x mx-1 text-warning"
                style="cursor: pointer"
                data-rating="{{ i }}"
                onmouseover="highlightStars({{ i }})"
                onmouseout="resetStars()"
                onclick="rateSummary({{ i }})"
              ></i>
              {% endfor %}
            </div>
            <div id="thankYouMessage" class="text-center text-success d-none">
              <i class="fas fa-check-circle me-1"></i> Thank you for your
              feedback!
            </div>
            <div class="mt-3">
              <label for="feedbackText" class="form-label"
                >Additional Comments (Optional)</label
              >
              <textarea
                class="form-control"
                id="feedbackText"
                rows="2"
                placeholder="Let us know how we can improve..."
              ></textarea>
              <div class="d-flex justify-content-end mt-2">
                <button
                  type="button"
                  class="btn btn-sm btn-primary"
                  onclick="submitFeedback()"
                >
                  Submit Feedback
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Example Modal -->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Example Abstract</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <p>
          Here's an example of an academic abstract you can use to test the
          summarizer:
        </p>
        <div class="p-3 bg-light rounded">
          <p class="mb-0">
            "Recent advances in artificial intelligence have led to the
            development of large language models capable of generating
            human-like text. These models, such as GPT-3 and BERT, have
            demonstrated remarkable performance on a wide range of natural
            language processing tasks. However, their ability to reason and
            understand context remains limited compared to human cognition. This
            paper presents a comprehensive survey of current approaches to
            improving the reasoning capabilities of language models. We examine
            various techniques including chain-of-thought prompting,
            self-consistency, and knowledge distillation. Our analysis reveals
            that while significant progress has been made, there remain
            fundamental challenges in achieving human-level reasoning. We
            conclude with a discussion of promising research directions for the
            future."
          </p>
        </div>
        <div class="mt-3">
          <button class="btn btn-sm btn-outline-primary" onclick="useExample()">
            <i class="fas fa-magic me-1"></i> Use This Example
          </button>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block extra_js %}
<script>
  // Update character count
  document
    .getElementById("{{ form.text.id }}")
    .addEventListener("input", function () {
      document.getElementById("charCount").textContent = this.value.length;
    });

  // Form submission with AJAX
  document
    .getElementById("summarizeForm")
    .addEventListener("submit", function (e) {
      e.preventDefault();

      const form = e.target;
      const formData = new FormData(form);
      const submitBtn = document.getElementById("summarizeBtn");
      const originalBtnText = submitBtn.innerHTML;

      // Show loading state
      submitBtn.disabled = true;
      submitBtn.innerHTML =
        '<span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span> Summarizing...';

      // Make AJAX request
      fetch('{{ url_for("summarizer.single") }}', {
        method: "POST",
        body: formData,
        headers: {
          "X-Requested-With": "XMLHttpRequest",
        },
      })
        .then((response) => response.json())
        .then((data) => {
          if (data.error) {
            throw new Error(data.error);
          }

          // Display results
          document.getElementById("originalTextContainer").textContent =
            formData.get("text");
          document.getElementById("summaryText").textContent = data.summary;
          document.getElementById(
            "summaryLength"
          ).textContent = `Summary length: ${
            data.summary.length
          } characters (${Math.round(data.summary.length / 5)} words)`;

          // Show result section
          document.getElementById("resultSection").classList.remove("d-none");

          // Scroll to results
          document
            .getElementById("resultSection")
            .scrollIntoView({ behavior: "smooth" });
        })
        .catch((error) => {
          console.error("Error:", error);
          alert(
            "An error occurred while generating the summary. Please try again."
          );
        })
        .finally(() => {
          // Reset button state
          submitBtn.disabled = false;
          submitBtn.innerHTML = originalBtnText;
        });
    });

  // Helper functions
  function clearForm() {
    document.getElementById("{{ form.text.id }}").value = "";
    document.getElementById("charCount").textContent = "0";
  }

  function useExample() {
    const exampleText = document.querySelector(
      "#exampleModal .modal-body p"
    ).textContent;
    document.getElementById("{{ form.text.id }}").value = exampleText.trim();
    document.getElementById("charCount").textContent =
      exampleText.trim().length;
    const modal = bootstrap.Modal.getInstance(
      document.getElementById("exampleModal")
    );
    modal.hide();
  }

  function copyToClipboard(event, elementId) {
    const text = document.getElementById(elementId).textContent;
    navigator.clipboard.writeText(text).then(() => {
      // Show tooltip or notification
      const tooltip = new bootstrap.Tooltip(document.createElement("div"), {
        title: "Copied!",
        trigger: "manual",
        placement: "top",
      });
      const button = event.target.closest("button");
      button.appendChild(tooltip._element);
      tooltip.show();
      setTimeout(() => tooltip.dispose(), 1000);
    });
  }

  function regenerateSummary() {
    document.getElementById("summarizeForm").dispatchEvent(new Event("submit"));
  }

  function startNewSummary() {
    document.getElementById("summarizeForm").reset();
    document.getElementById("charCount").textContent = "0";
    document.getElementById("resultSection").classList.add("d-none");
    document.getElementById("{{ form.text.id }}").focus();
  }

  // Star rating functionality
  function highlightStars(rating) {
    const stars = document.querySelectorAll("#ratingContainer i");
    stars.forEach((star, index) => {
      if (index < rating) {
        star.classList.remove("far");
        star.classList.add("fas");
      } else {
        star.classList.remove("fas");
        star.classList.add("far");
      }
    });
  }

  function resetStars() {
    const stars = document.querySelectorAll("#ratingContainer i");
    stars.forEach((star) => {
      star.classList.remove("fas");
      star.classList.add("far");
    });
  }

  function rateSummary(rating) {
    // Here you would typically send the rating to your backend
    console.log("Rated:", rating);
    document.getElementById("thankYouMessage").classList.remove("d-none");
    setTimeout(() => {
      document.getElementById("thankYouMessage").classList.add("d-none");
    }, 3000);
  }

  function submitFeedback() {
    const feedback = document.getElementById("feedbackText").value;
    // Here you would typically send the feedback to your backend
    console.log("Feedback submitted:", feedback);
    alert("Thank you for your feedback!");
    document.getElementById("feedbackText").value = "";
  }
</script>
{% endblock %}
